<!DOCTYPE html>
<html>
  <head>
    <title>Chatbot</title>
  </head>
  <body>
    <div class="js-container"></div>
    <script src="https://unpkg.com/supersimpledev@3.2.1/external-library.js"></script>
    <script src="react-basic.js"></script>
    <script src="https://unpkg.com/supersimpledev/react.js"></script>
    <script src="https://unpkg.com/supersimpledev/react-dom.js"></script>

    <script src="https://unpkg.com/supersimpledev/babel.js"></script>
    <script type="text/babel">

        function ChatInput ({ChatMessages, setChatMessages}) {
          const [inputText, setInputText] = React.useState("");
          
          function SaveInput(event) {
             setInputText(event.target.value);
          }

          function SendMessage() {
            setChatMessages([
                  ...ChatMessages,
                  {
                    message: "Hello Chatbot",
                    sender: "user",
                    id: crypto.randomUUID()
                  }

                ]);
          }
            return(
                <>
                <input onChange={SaveInput} placeholder = "Send a message to Chatbot" size = "30"></input>
                <button onClick={SendMessage}>Send</button>
                </>
            );
        }

        function ChatMessage({message, sender}) {
                return(
                    <div>
                        {sender === 'robot' && <img src="assets/robot.png" width = "50" />}
                        {message}
                        {sender === 'user' && <img src="assets/user.png" width = "50" />}
                    </div>
                );
                }

        function ChatMessages ({ChatMessages}) {    
            return(
              <>
               

        {ChatMessages.map((ChatMessages) => {
                return(
                    <ChatMessage
                     message = {ChatMessages.message}
                     sender = {ChatMessages.sender}
                     key = {ChatMessages.id}
                    />
                );
            })}
            </>
          );
          }

        function App() {
          
          const [ChatMessages, setChatMessages] = React.useState([
                {
                    message: "Hello Chatbot",
                    sender: "user",
                    id: "id1"
                },
                {
                    message: "Hello Adhil H Quazi",
                    sender: "robot",
                    id: "id2"
                },
                {
                    message: "I am Good bro thanks for asking",
                    sender: "user",
                    id: "id3"
                },
                {
                    message: "How are you doing?",
                    sender: "robot",
                    id: "id4"
                }
            ]);

            return(
                <>
                    <ChatInput 
                    ChatMessages = {ChatMessages}
                    setChatMessages = {setChatMessages}
                    />
                    
                    <ChatMessages
                    ChatMessages = {ChatMessages}
                    />
                </>
            );
        }

      const container = document.querySelector('.js-container');
      ReactDOM.createRoot(container).render(<App />);
    </script>
  </body>
</html>